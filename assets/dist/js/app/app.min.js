(function() {
  var app;

  app = angular.module('opendyslexic', []);

  app.controller('core', function($scope) {
    $scope.enabled = false;
    $scope.message = $scope.enabled ? "On" : "Off";
    $scope.init = function() {
      chrome.storage.sync.get({
        enabled: false
      }, function(items) {
        console.log(items);
        if (items.enabled) {
          $scope.enabled = 1;
        } else {
          $scope.enabled = 0;
        }
      });
    };

    /**
     * Adds Saves the Optoins
     */
    $scope.openDyslexic = function() {
      chrome.storage.sync.set({
        enabled: $scope.enabled
      }, function() {
        $scope.reloadPage();
      });
    };
    return $scope.reloadPage = function() {
      chrome.tabs.getSelected(null, function(tab) {
        var code;
        code = 'window.location.reload();';
        chrome.tabs.executeScript(tab.id, {
          code: code
        });
      });
    };
  });

  return;

}).call(this);
